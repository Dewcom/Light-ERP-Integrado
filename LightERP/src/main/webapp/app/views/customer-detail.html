<div ng-controller="CustomerDetailController as controller">
    <div class="row">
        <div class="col-md-7">
            <h3>Detalle del cliente</h3>
        </div>
        <div class="col-md-5 customButtonGroup">
            <button type="submit" class="btn btn-labeled btn-info" ng-click="controller.goBack()">
                <span class="btn-label">
                    <em class="fa fa-mail-reply"></em>
                </span>Regresar
            </button>
            <button type="submit" class="btn btn-labeled btn-success" ng-click="controller.updateCustomer()">
                <span class="btn-label">
                    <em class="fa fa-plus"></em>
                </span>Guardar
            </button>
            <button type="button" class="btn btn-labeled btn-danger" ng-click="controller.cancel()">
                   <span class="btn-label"><i class="fa fa-times"></i>
                   </span>Cancelar
            </button>
        </div>
    </div>
    <form class="panel">
        <uib-tabset justified="true">
            <uib-tab>
                <form name="customerForm.formValidate" ng-submit="form.submitForm()" novalidate="" class="form-validate form-horizontal">
                    <uib-tab-heading>Información</uib-tab-heading>
                    <div>
                        <fieldset>
                            <legend>Cliente</legend>
                            <!-- START row-->
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label>Tipo de cliente</label>
                                        <div class="controls">
                                            <select name="selectedCustomerType" ng-model="currentCustomer.selectedCustomerType"
                                                    ng-options="item.id as item.name for item in controller.customerTypeList"
                                                    class="form-control" required="required">
                                                <option value="?"></option>
                                            </select>
                                            <span ng-show="form.validateInput('selectedCustomerType', 'required')"
                                                  class="text-danger">This field is required</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label>Tipo de identificación</label>
                                        <div class="controls">
                                            <select name="selectedIdentificationType" ng-model="currentCustomer.selectedIdentificationType"
                                                    ng-options="item.id as item.name for item in controller.identificationTypeList"
                                                    class="form-control" required="required">
                                                <option value="?"></option>
                                            </select>
                                            <span ng-show="formStep1.$submitted &amp;&amp; formStep1.selectedIdentificationType.$invalid" class="text-danger">Este campo es inválido</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label>Identificación</label>
                                        <div class="controls">
                                            <input type="text" name="identification" ng-model="currentCustomer.identification" placeholder="110102020" required="required" class="form-control" />
                                            <span ng-show="formStep1.$submitted &amp;&amp; formStep1.identification.$invalid" class="text-danger">Este campo es inválido</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label>Nombre</label>
                                        <div class="controls">
                                            <input type="text" name="name" ng-model="currentCustomer.name" placeholder="Juan" required="required" class="form-control" />
                                            <span ng-show="formStep1.$submitted &amp;&amp; formStep1.name.$invalid" class="text-danger">Este campo es inválido</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label>Primer apellido</label>
                                        <div class="controls">
                                            <input type="text" name="firstLastName" ng-model="currentCustomer.firstLastName" placeholder="Perez" required="required" class="form-control" />
                                            <span ng-show="formStep1.$submitted &amp;&amp; formStep1.firstLastName.$invalid" class="text-danger">Este campo es inválido</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label>Segundo apellido</label>
                                        <div class="controls">
                                            <input type="text" name="secondLastName" ng-model="currentCustomer.secondLastName" placeholder="Perez" required="required" class="form-control" />
                                            <span ng-show="formStep1.$submitted &amp;&amp; formStep1.secondLastName.$invalid" class="text-danger">Este campo es inválido</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- END row-->
                        </fieldset>
                        <fieldset>
                            <legend>Información de contacto</legend>
                            <!-- START row-->
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label>Teléfono #1</label>
                                        <div class="controls">
                                            <input type="tel" name="phoneNumber1" ng-model="currentCustomer.phoneNumber1" placeholder="22221111" required="required" class="form-control" />
                                            <span ng-show="formStep2.$submitted &amp;&amp; formStep2.phoneNumber1.$invalid" class="text-danger">Este campo es inválido</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label>Teléfono #2</label>
                                        <div class="controls">
                                            <input type="tel" name="phoneNumber2" ng-model="currentCustomer.phoneNumber2" placeholder="22221111" class="form-control" />
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label>Teléfono móvil</label>
                                        <div class="controls">
                                            <input type="tel" name="mobile" ng-model="currentCustomer.mobile" placeholder="88887777" class="form-control" />
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12">

                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>Correo electrónico</label>
                                        <div class="controls">
                                            <input type="email" name="email" ng-model="currentCustomer.email" placeholder="contactEmail1" class="form-control" />
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>Website</label>
                                        <div class="controls">
                                            <input type="text" name="website" ng-model="currentCustomer.website" placeholder="www.website.com" class="form-control" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- END row-->
                        </fieldset>
                        <fieldset>
                            <legend>Direcciones</legend>

                            <!-- START row-->
                            <div ng-repeat="address in controller.addresses">
                                <h4>Dirección</h4>
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label>Provincia</label>
                                        <div class="controls">
                                            <select name="selectedProvince" ng-model="currentCustomer.selectedProvince"
                                                    ng-options="item.idProvince as item.name for item in controller.provinces"
                                                    class="form-control" required="required" ng-change="controller.loadCantons(currentCustomer.selectedProvince)">
                                                <option value="?"></option>
                                            </select>
                                            <span ng-show="form.$submitted &amp;&amp; form.selectedProvince.$invalid" class="text-danger">Este campo es inválido</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label>Cantón</label>
                                        <div class="controls">
                                            <select name="selectedCanton" ng-model="currentCustomer.selectedCanton"
                                                    ng-options="item.idCanton as item.name for item in controller.cantons"
                                                    class="form-control" required="required" ng-change="controller.loadDistricts(currentCustomer.selectedCanton)">
                                                <option value="?"></option>
                                            </select>
                                            <span ng-show="form.$submitted &amp;&amp; form.selectedCanton.$invalid" class="text-danger">Este campo es inválido</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label>Distrito</label>
                                        <div class="controls">
                                            <select name="selectedDistrict" ng-model="currentCustomer.selectedDistrict"
                                                    ng-options="item.idDistrict as item.name for item in controller.districts"
                                                    class="form-control" required="required">
                                                <option value="?"></option>
                                            </select>
                                            <span ng-show="form.$submitted &amp;&amp; form.selectedDistrict.$invalid" class="text-danger">Este campo es inválido</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label>Dirección</label>
                                        <div class="controls">
                                            <textarea style="resize: none" name="address" ng-model="currentCustomer.address" class="form-control" required="required" />
                                            <span ng-show="form.$submitted &amp;&amp; form.address.$invalid" class="text-danger">Este campo es inválido</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- END row-->
                        </fieldset>
                        <fieldset>
                            <legend>Crédito</legend>
                            <!-- START row-->
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>Límite de crédito</label>
                                        <div class="controls">
                                            <input type="number" name="creditLimit" ng-model="currentCustomer.creditLimit" placeholder="$" required="required" class="form-control" />
                                            <span ng-show="formStep4.$submitted &amp;&amp; formStep4.creditLimit.$invalid" class="text-danger">Este campo es inválido</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>Porcentaje de descuento</label>
                                        <div class="controls">
                                            <input type="number" name="discountPorcentage" ng-model="currentCustomer.discountPercentage" placeholder="%" required="required" class="form-control" />
                                            <span ng-show="formStep4.$submitted &amp;&amp; formStep4.discountPorcentage.$invalid" class="text-danger">Este campo es inválido</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- END row-->
                        </fieldset>
                    </div>
                </form>
            </uib-tab>
            <uib-tab>
                <uib-tab-heading>Contactos</uib-tab-heading>
                <div ng-controller="ContactController as contactController">
                    <legend>Contactos</legend>
                    <div class="row">
                        <div ng-repeat="customerContact in controller.customerContacts" class="col-md-4">
                            <div class="panel panel-default">
                                <div class="panel-body text-left">
                                    <h4>{{customerContact.name + ' '+ customerContact.firstLastName + ' ' +customerContact.secondLastName}}</h4>

                                    <ul   style="list-style: none;">
                                        <li>Departamento: {{customerContact.department}}</li>
                                        <li>Puesto: {{customerContact.jobTitle}}</li>
                                        <li>Tel: {{customerContact.phoneNumber1}}</li>
                                        <li>Correo: {{customerContact.email}}</li>
                                    </ul>
                                </div>
                                <div class="panel-footer clearfix">
                                    <div class="pull-left"><a href="" class="btn btn-xs btn-primary">Enviar correo</a>
                                    </div>
                                    <div ng-click="contactController.open('md', customerContact)" class="pull-right"><a href="" class="btn btn-xs btn-default">Editar</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </uib-tab>
        </uib-tabset>
    </form>
    <toaster-container toaster-options="{'position-class': 'toast-bottom-right', 'close-button':true}"></toaster-container>
    <script type="text/ng-template" id="disableContactModal">
        <div class="ngdialog-message text-center">
            <h3>Eliminar contacto</h3>
            <p>¿Está seguro que desea eliminar al contacto?</p>
            <div>
                <button type="button" ng-click="confirm(confirmValue)" class="btn btn-primary mr">Confirmar</button>
                <button type="button" ng-click="closeThisDialog('button')" class="btn btn-default">Cancelar</button>
            </div>
        </div>
    </script>

</div>
